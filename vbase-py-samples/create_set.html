

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>create_set.py &mdash; vbase-py  documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=5929fcd5"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="add_string_dataset_record.py" href="add_string_dataset_record.html" />
    <link rel="prev" title="vBase Python Samples Quickstart" href="quickstart.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            vbase-py
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">vBase Python Samples Quickstart</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">create_set.py</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#summary">Summary</a></li>
<li class="toctree-l2"><a class="reference internal" href="#detailed-description">Detailed Description:</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="add_string_dataset_record.html">add_string_dataset_record.py</a></li>
<li class="toctree-l1"><a class="reference internal" href="add_string_dataset_record_async.html">add_string_dataset_record_async.py</a></li>
<li class="toctree-l1"><a class="reference internal" href="restore_dataset_provenance.html">restore_dataset_provenance.py</a></li>
<li class="toctree-l1"><a class="reference internal" href="windows_guide.html">Windows vBase Setup Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="windows_subsystem_for_linux_guide.html">Windows Subsystem for Linux (WSL) vBase Setup Guide</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">vbase-py</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">create_set.py</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="create-set-py">
<h1>create_set.py<a class="headerlink" href="#create-set-py" title="Link to this heading"></a></h1>
<p>This sample creates and validates a vBase set.</p>
<section id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Link to this heading"></a></h2>
<p>A set is a collection of objects.
A named set of data records is a dataset.
Such datasets can implement any point-in-time (PIT) or bitemporal data
and prove this provenance to third parties.
The sample illustrates low-level vBase set operations.
Low-level set operations expose all vBase features and provide the most control
without the benefit of simplifying higher-level abstractions.</p>
</section>
<section id="detailed-description">
<h2>Detailed Description:<a class="headerlink" href="#detailed-description" title="Link to this heading"></a></h2>
<ul>
<li><p>Create a vBase object using a Web3 HTTP commitment service.
The commitment service is a smart contract running on a blockchain.
The initialization uses connection parameters specified in environment variables:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">vbc</span> <span class="o">=</span> <span class="n">VBaseClient</span><span class="o">.</span><span class="n">create_instance_from_env</span><span class="p">()</span>
</pre></div>
</div>
</li>
<li><p>Create the test set commitment.
This operation records that the user with the above VBASE_COMMITMENT_SERVICE_PRIVATE_KEY
has created the named dataset.
Such commitments are used to validate that a given collection of user datasets is complete
and mitigates Sybil attacks (https://en.wikipedia.org/wiki/Sybil_attack).
Set creation is idempotent.
Multiple creations will log multiple events, but a single set commitment will be recorded.
The returned receipt contains information on the set commitment.
It can be optionally retained to simplify subsequent validation.
All receipts are also available via vBase indexing services.
Since add_set() calls are idempotent,
duplicate calls will be no-ops and will return empty receipts.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">receipt</span> <span class="o">=</span> <span class="n">vbc</span><span class="o">.</span><span class="n">add_named_set</span><span class="p">(</span><span class="n">SET_NAME</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;add_named_set() receipt:</span><span class="se">\n</span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">pprint</span><span class="o">.</span><span class="n">pformat</span><span class="p">(</span><span class="n">receipt</span><span class="p">))</span>
</pre></div>
</div>
</li>
<li><p>Verify that a given set commitment exists for a given user.
This will typically be called by the data consumer to verify
a producer’s claims about dataset provenance:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">assert</span> <span class="n">vbc</span><span class="o">.</span><span class="n">user_named_set_exists</span><span class="p">(</span><span class="n">vbc</span><span class="o">.</span><span class="n">get_default_user</span><span class="p">(),</span> <span class="n">SET_NAME</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="quickstart.html" class="btn btn-neutral float-left" title="vBase Python Samples Quickstart" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="add_string_dataset_record.html" class="btn btn-neutral float-right" title="add_string_dataset_record.py" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023-2024, PIT Labs, Inc.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>